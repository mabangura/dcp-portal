'use client';import { useState } from 'react';export default function ImportPage(){const [file,setFile]=useState<File|null>(null);const [required,setRequired]=useState<string>('[]');const [report,setReport]=useState<any>(null);const [formId,setFormId]=useState<string>('');async function dryrun(){if(!file)return;const fd=new FormData();fd.append('file',file);fd.append('required_columns',required);const res=await fetch('/api/importer/import/dryrun',{method:'POST',body:fd});setReport(await res.json());}async function commit(){if(!file)return;const fd=new FormData();fd.append('file',file);fd.append('form_id',formId||'form.demo');fd.append('mapping','{}');const res=await fetch('/api/importer/import/commit',{method:'POST',body:fd});alert('Queued: '+JSON.stringify(await res.json()));}return(<div><h1 className="text-xl font-semibold mb-4">CSV Import â†’ Submissions (MVP)</h1><div className="card space-y-3"><input type="file" accept=".csv,.json" onChange={e=>setFile(e.target.files?.[0]||null)} /><input className="w-full border p-2 rounded" placeholder='Required columns JSON (e.g. ["household_id","village"])' value={required} onChange={e=>setRequired(e.target.value)} /><input className="w-full border p-2 rounded" placeholder='Form ID (Central)' value={formId} onChange={e=>setFormId(e.target.value)} /><div className="flex gap-2"><button className="btn" onClick={dryrun}>Dry-run</button><button className="btn btn-primary" onClick={commit}>Commit (queue)</button></div></div>{report&&<div className="card mt-4"><pre className="text-xs overflow-auto">{JSON.stringify(report,null,2)}</pre></div>}</div>);}